<div *ngIf="isLoading" class="loading-container">
  <p>Cargando test... ⏳</p>
  </div>

  <a [routerLink]="['/clase', currentClassType]" class="back-link">
  ← Volver al Panel (Clase {{ currentClassType }})
</a>
<form *ngIf="!isLoading && questions.length > 0" [formGroup]="testForm" (ngSubmit)="onSubmit()">
  
  <div class="test-header">
    <h1>Test Clase {{ currentClassType.toUpperCase() }}</h1>
    <p>Responde las {{ questions.length }} preguntas.</p>
  </div>

  <div *ngFor="let question of questions; let i = index" class="question-container">
    <h3><span class="question-number">Pregunta {{ i + 1 }}</span> {{ question.text }}</h3>
    
    <div *ngIf="!question.multi" class="options-container">
      <div *ngFor="let option of question.options" class="option-label">
        <label>
          <input type="radio" [formControlName]="question.id.toString()" [value]="option.letter">
          <span class="option-letter">{{ option.letter }})</span>
          <span class="option-text">{{ option.text }}</span>
        </label>
      </div>
    </div>

    <div *ngIf="question.multi" class="options-container" [formGroupName]="question.id.toString()">
      <div *ngFor="let option of question.options" class="option-label">
        <label>
          <input type="checkbox" [formControlName]="option.letter">
          <span class="option-letter">{{ option.letter }})</span>
          <span class="option-text">{{ option.text }}</span>
        </label>
      </div>
    </div>
  </div>

  <button type="submit" [disabled]="!testForm.valid" class="submit-btn">Evaluar Test</button>
</form>

<div *ngIf="!isLoading && questions.length === 0" class="no-questions-container">
  <h2>Aún no hay preguntas</h2>
  <p>Todavía no hemos añadido preguntas para la Clase {{ currentClassType.toUpperCase() }}. ¡Vuelve pronto!</p>
  <a routerLink="/" class="back-link">Volver al Inicio</a>
</div>